{"ast":null,"code":"var _jsxFileName = \"D:\\\\Projects\\\\ficha\\\\src\\\\components\\\\LugarFechaNacimiento.jsx\";\nimport React from \"react\";\nimport { Form, Select, DatePicker, Layout } from \"antd\";\nimport moment from \"moment\";\nconst Option = Select.Option; // const apiUrl = 'https://net.upt.edu.pe/FichaDatos/FichaWeb/modules';\n\nconst apiUrl = 'http://localhost/FichaDatos/FichaWeb/modules';\n\nclass LugarFechaNacimiento extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.siguiente = e => {\n      e.preventDefault();\n      this.props.siguiente();\n    };\n\n    this.regresar = e => {\n      e.preventDefault();\n      this.props.regresar();\n    };\n\n    this.getPaises = async () => {\n      const response = await fetch(\"\".concat(apiUrl, \"/Nacionalidad.php?p=read&session=\").concat(this.state.session, \"&CodUniv=\").concat(this.state.cod_univ));\n      const data = await response.json();\n      this.setState({\n        nacionalidades: data\n      });\n    };\n\n    this.getCiudades = async () => {\n      const response = await fetch(\"\".concat(apiUrl, \"/Ciudad.php?p=read&session=\").concat(this.state.session, \"&CodUniv=\").concat(this.state.cod_univ, \"&idPais=9589\"));\n      const data = await response.json();\n      await this.setState({\n        ciudades: data\n      });\n    };\n\n    this.getProvincias = async () => {\n      const response = await fetch(\"\".concat(apiUrl, \"/Provincia.php?p=read&session=\").concat(this.state.session, \"&CodUniv=\").concat(this.state.cod_univ, \"&idCiudad=\").concat(this.state.cod_ciudad));\n      const data = await response.json();\n      await this.setState({\n        provincias: data\n      });\n    };\n\n    this.getDistritos = async () => {\n      const response = await fetch(\"\".concat(apiUrl, \"/Distrito.php?p=read&session=\").concat(this.state.session, \"&CodUniv=\").concat(this.state.cod_univ, \"&idPais=9589&idCiudad=\").concat(this.state.cod_ciudad, \"&idProvincia=\").concat(this.state.cod_provincia));\n      const data = await response.json();\n      await this.setState({\n        distritos: data\n      });\n    };\n\n    this.handleSelectedCiudad = async e => {\n      console.log(e);\n      await this.setState({\n        cod_ciudad: e\n      });\n      this.getProvincias();\n    };\n\n    this.handleSelectedProvincia = async e => {\n      await this.setState({\n        cod_provincia: e\n      });\n      this.getDistritos();\n    };\n\n    this.state = {\n      nacionalidades: [],\n      ciudades: [],\n      provincias: [],\n      distritos: [],\n      session: this.props.session,\n      cod_univ: this.props.cod_univ,\n      cod_ciudad: 0,\n      cod_provincia: 0,\n      cod_distrito: 0\n    };\n  }\n\n  componentDidMount() {\n    const _this$props = this.props,\n          paises = _this$props.paises,\n          ciudades = _this$props.ciudades,\n          provincias = _this$props.provincias,\n          distritos = _this$props.distritos;\n    this.setState({\n      provincias: provincias,\n      distritos: distritos\n    });\n  }\n\n  render() {\n    const _this$props2 = this.props,\n          ficha = _this$props2.ficha,\n          handleChangeSelect = _this$props2.handleChangeSelect,\n          handleChangeDatePicker = _this$props2.handleChangeDatePicker;\n    const _this$props3 = this.props,\n          paises = _this$props3.paises,\n          ciudades = _this$props3.ciudades;\n    const _this$state = this.state,\n          provincias = _this$state.provincias,\n          distritos = _this$state.distritos;\n    const formItemLayout = {\n      labelCol: {\n        xs: {\n          span: 24\n        },\n        sm: {\n          span: 8\n        }\n      },\n      wrapperCol: {\n        xs: {\n          span: 24\n        },\n        sm: {\n          span: 16\n        }\n      }\n    };\n    const getFieldDecorator = this.props.form.getFieldDecorator;\n    const dateFormat = \"YYYY-DD-MM\"; // const dateFormat2 = [\"DD-MM-YYYY\", \"DD-MM-YY\"];\n\n    return React.createElement(Layout, {\n      style: {\n        background: \"white\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, React.createElement(Form, Object.assign({}, formItemLayout, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }), React.createElement(Form.Item, {\n      label: \"Fecha de Nacimiento\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, getFieldDecorator(\"fechaNac\", {\n      initialValue: ficha.fch_nacimiento_per === \"\" ? moment(\"1999-11-25\", dateFormat) : moment(ficha.fch_nacimiento_per, dateFormat),\n      rules: [{\n        type: \"object\",\n        required: true,\n        message: \"Por favor seleccione la fecha de su nacimiento\"\n      }]\n    })(React.createElement(DatePicker, {\n      defaultPickerValue: moment(ficha.fch_nacimiento_per),\n      placeholder: \"25-11-1999\" // format={dateFormat2}\n      ,\n      onChange: handleChangeDatePicker(\"fch_nacimiento_per\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }))), React.createElement(Form.Item, {\n      label: \"Pa\\xEDs\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, getFieldDecorator(\"pais\", {\n      initialValue: ficha.id_nac_pais_per === \"\" || ficha.id_nac_pais_per == null ? 9589 : ficha.id_nac_pais_per,\n      rules: [{\n        required: true,\n        message: \"Por favor seleccione el país.\"\n      }]\n    })(React.createElement(Select, {\n      placeholder: \"Perú\",\n      onChange: handleChangeSelect(\"id_nac_pais_per\"),\n      showSearch: true,\n      optionFilterProp: \"children\",\n      filterOption: (input, option) => option.props.children.toLowerCase().indexOf(input.toLowerCase()) >= 0,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, paises.map(pais => React.createElement(Option, {\n      value: pais.CodNac,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, pais.Descripcion))))), React.createElement(Form.Item, {\n      label: \"Ciudad\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, getFieldDecorator(\"ciudad\", {\n      initialValue: ficha.id_nac_ciudad_per === \"\" || ficha.id_nac_ciudad_per == null ? 2919 : ficha.id_nac_ciudad_per,\n      rules: [{\n        required: true,\n        message: \"Por favor seleccione la ciudad.\"\n      }]\n    })(React.createElement(Select, {\n      placeholder: \"Seleccione ciudad\",\n      onChange: handleChangeSelect(\"id_nac_ciudad_per\"),\n      onSelect: this.handleSelectedCiudad,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, ciudades.map(ciudad => React.createElement(Option, {\n      value: ciudad.CodCiudad,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }, ciudad.descripcion))))), React.createElement(Form.Item, {\n      label: \"Provincia\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }, getFieldDecorator(\"provincia\", {\n      initialValue: ficha.id_nac_provincia_per === \"\" || ficha.id_nac_provincia_per == null ? 2301 : ficha.id_nac_provincia_per,\n      rules: [{\n        required: true,\n        message: \"Por favor seleccione la provincia.\"\n      }]\n    })(React.createElement(Select, {\n      placeholder: \"Seleccione la provincia\",\n      onChange: handleChangeSelect(\"id_nac_provincia_per\"),\n      onSelect: this.handleSelectedProvincia,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }, this.state.provincias.map(provincia => React.createElement(Option, {\n      value: provincia.CodProv,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }, provincia.descripcion))))), React.createElement(Form.Item, {\n      label: \"Distrito\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234\n      },\n      __self: this\n    }, getFieldDecorator(\"distrito\", {\n      initialValue: ficha.id_nac_distrito_per === \"\" || ficha.id_nac_distrito_per == null ? 230101 : ficha.id_nac_distrito_per,\n      rules: [{\n        required: true,\n        message: \"Por favor seleccione el distrito.\"\n      }]\n    })(React.createElement(Select, {\n      placeholder: \"Seleccione el distrito\",\n      onChange: handleChangeSelect(\"id_nac_distrito_per\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248\n      },\n      __self: this\n    }, distritos.map(distrito => React.createElement(Option, {\n      value: distrito.CodDist,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253\n      },\n      __self: this\n    }, distrito.descripcion)))))));\n  }\n\n}\n\nexport default Form.create()(LugarFechaNacimiento);","map":{"version":3,"sources":["D:\\Projects\\ficha\\src\\components\\LugarFechaNacimiento.jsx"],"names":["React","Form","Select","DatePicker","Layout","moment","Option","apiUrl","LugarFechaNacimiento","Component","constructor","props","siguiente","e","preventDefault","regresar","getPaises","response","fetch","state","session","cod_univ","data","json","setState","nacionalidades","getCiudades","ciudades","getProvincias","cod_ciudad","provincias","getDistritos","cod_provincia","distritos","handleSelectedCiudad","console","log","handleSelectedProvincia","cod_distrito","componentDidMount","paises","render","ficha","handleChangeSelect","handleChangeDatePicker","formItemLayout","labelCol","xs","span","sm","wrapperCol","getFieldDecorator","form","dateFormat","background","initialValue","fch_nacimiento_per","rules","type","required","message","id_nac_pais_per","input","option","children","toLowerCase","indexOf","map","pais","CodNac","Descripcion","id_nac_ciudad_per","ciudad","CodCiudad","descripcion","id_nac_provincia_per","provincia","CodProv","id_nac_distrito_per","distrito","CodDist","create"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport {Form, Select, DatePicker, Layout} from \"antd\";\nimport moment from \"moment\";\n\nconst {Option} = Select;\n\n// const apiUrl = 'https://net.upt.edu.pe/FichaDatos/FichaWeb/modules';\nconst apiUrl = 'http://localhost/FichaDatos/FichaWeb/modules';\n\nclass LugarFechaNacimiento extends React.Component {\n  siguiente = e => {\n    e.preventDefault();\n    this.props.siguiente();\n  };\n\n  regresar = e => {\n    e.preventDefault();\n    this.props.regresar();\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      nacionalidades: [],\n      ciudades: [],\n      provincias: [],\n      distritos: [],\n      session: this.props.session,\n      cod_univ: this.props.cod_univ,\n      cod_ciudad: 0,\n      cod_provincia: 0,\n      cod_distrito: 0\n    };\n  }\n\n  componentDidMount() {\n    const {paises, ciudades, provincias, distritos} = this.props;\n\n    this.setState({\n      provincias: provincias,\n      distritos: distritos\n    })\n  }\n\n  getPaises = async () => {\n    const response = await fetch(\n      `${apiUrl}/Nacionalidad.php?p=read&session=${this.state.session}&CodUniv=${this.state.cod_univ}`\n    );\n\n    const data = await response.json();\n    this.setState({\n      nacionalidades: data\n    });\n  };\n\n  getCiudades = async () => {\n    const response = await fetch(\n      `${apiUrl}/Ciudad.php?p=read&session=${this.state.session}&CodUniv=${this.state.cod_univ}&idPais=9589`\n    );\n    const data = await response.json();\n    await this.setState({\n      ciudades: data\n    });\n  };\n\n  getProvincias = async () => {\n    const response = await fetch(\n      `${apiUrl}/Provincia.php?p=read&session=${this.state.session}&CodUniv=${this.state.cod_univ}&idCiudad=${this.state.cod_ciudad}`\n    );\n    const data = await response.json();\n    await this.setState({\n      provincias: data\n\n    });\n  };\n\n  getDistritos = async () => {\n    const response = await fetch(\n      `${apiUrl}/Distrito.php?p=read&session=${this.state.session}&CodUniv=${this.state.cod_univ}&idPais=9589&idCiudad=${this.state.cod_ciudad}&idProvincia=${this.state.cod_provincia}`\n    );\n    const data = await response.json();\n    await this.setState({\n      distritos: data\n    });\n  };\n\n  handleSelectedCiudad = async (e) => {\n    console.log(e);\n    await this.setState({\n      cod_ciudad: e\n    })\n    this.getProvincias();\n  }\n\n  handleSelectedProvincia = async (e) => {\n    await this.setState({\n      cod_provincia: e\n    })\n    this.getDistritos();\n  }\n\n  render() {\n    const {ficha, handleChangeSelect, handleChangeDatePicker} = this.props;\n    const {paises, ciudades} = this.props;\n\n    const {provincias, distritos}= this.state;\n\n    const formItemLayout = {\n      labelCol: {\n        xs: {span: 24},\n        sm: {span: 8}\n      },\n      wrapperCol: {\n        xs: {span: 24},\n        sm: {span: 16}\n      }\n    };\n\n    const {getFieldDecorator} = this.props.form;\n    const dateFormat = \"YYYY-DD-MM\";\n    // const dateFormat2 = [\"DD-MM-YYYY\", \"DD-MM-YY\"];\n\n    return (\n      <Layout style={{background: \"white\"}}>\n        <Form {...formItemLayout}>\n          <Form.Item label=\"Fecha de Nacimiento\">\n            {getFieldDecorator(\"fechaNac\", {\n              initialValue:\n                ficha.fch_nacimiento_per === \"\"\n                  ? moment(\"1999-11-25\", dateFormat)\n                  : moment(ficha.fch_nacimiento_per, dateFormat),\n              rules: [\n                {\n                  type: \"object\",\n                  required: true,\n                  message: \"Por favor seleccione la fecha de su nacimiento\"\n                }\n              ]\n            })(\n              <DatePicker\n                defaultPickerValue={moment(ficha.fch_nacimiento_per)}\n                placeholder={\"25-11-1999\"}\n                // format={dateFormat2}\n                onChange={handleChangeDatePicker(\"fch_nacimiento_per\")}\n              />\n            )}\n          </Form.Item>\n\n          <Form.Item label=\"País\">\n            {getFieldDecorator(\"pais\", {\n              initialValue:\n                ficha.id_nac_pais_per === \"\" || ficha.id_nac_pais_per == null\n                  ? 9589\n                  : ficha.id_nac_pais_per,\n              rules: [\n                {\n                  required: true,\n                  message: \"Por favor seleccione el país.\"\n                }\n              ]\n            })(\n              <Select\n                placeholder={\"Perú\"}\n                onChange={handleChangeSelect(\"id_nac_pais_per\")}\n                showSearch={true}\n                optionFilterProp={\"children\"}\n                filterOption={(input, option) =>\n                  option.props.children\n                    .toLowerCase()\n                    .indexOf(input.toLowerCase()) >= 0\n                }\n              >\n                {paises.map(pais => (\n                  <Option value={pais.CodNac}>\n                    {pais.Descripcion}\n                  </Option>\n                ))}\n              </Select>\n            )}\n          </Form.Item>\n          <Form.Item label=\"Ciudad\">\n            {getFieldDecorator(\"ciudad\", {\n              initialValue:\n                ficha.id_nac_ciudad_per === \"\" ||\n                ficha.id_nac_ciudad_per == null\n                  ? 2919\n                  : ficha.id_nac_ciudad_per,\n              rules: [\n                {\n                  required: true,\n                  message: \"Por favor seleccione la ciudad.\"\n                }\n              ]\n            })(\n              <Select\n                placeholder={\"Seleccione ciudad\"}\n                onChange={handleChangeSelect(\"id_nac_ciudad_per\")}\n                onSelect={this.handleSelectedCiudad}\n              >\n                {ciudades.map(ciudad => (\n                  <Option value={ciudad.CodCiudad}>{ciudad.descripcion}</Option>\n                ))}\n              </Select>\n            )}\n          </Form.Item>\n          <Form.Item label=\"Provincia\">\n            {getFieldDecorator(\"provincia\", {\n              initialValue:\n                ficha.id_nac_provincia_per === \"\" ||\n                ficha.id_nac_provincia_per == null\n                  ? 2301\n                  : ficha.id_nac_provincia_per,\n              rules: [\n                {\n                  required: true,\n                  message: \"Por favor seleccione la provincia.\"\n                }\n              ]\n            })(\n              <Select\n                placeholder={\"Seleccione la provincia\"}\n                onChange={handleChangeSelect(\"id_nac_provincia_per\")}\n                onSelect={this.handleSelectedProvincia}\n              >\n                {this.state.provincias.map(provincia => (\n                  <Option value={provincia.CodProv}>\n                    {provincia.descripcion}\n                  </Option>\n                ))}\n              </Select>\n            )}\n          </Form.Item>\n          <Form.Item label=\"Distrito\">\n            {getFieldDecorator(\"distrito\", {\n              initialValue:\n                ficha.id_nac_distrito_per === \"\" ||\n                ficha.id_nac_distrito_per == null\n                  ? 230101\n                  : ficha.id_nac_distrito_per,\n              rules: [\n                {\n                  required: true,\n                  message: \"Por favor seleccione el distrito.\"\n                }\n              ]\n            })(\n              <Select\n                placeholder={\"Seleccione el distrito\"}\n                onChange={handleChangeSelect(\"id_nac_distrito_per\")}\n              >\n                {distritos.map(distrito => (\n                  <Option value={distrito.CodDist}>\n                    {distrito.descripcion}\n                  </Option>\n                ))}\n              </Select>\n            )}\n          </Form.Item>\n        </Form>\n      </Layout>\n    );\n  }\n}\n\nexport default Form.create()(LugarFechaNacimiento);\n"]},"metadata":{},"sourceType":"module"}