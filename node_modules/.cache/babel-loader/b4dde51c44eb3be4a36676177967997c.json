{"ast":null,"code":"import _objectSpread from \"D:\\\\Projects\\\\ficha\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"D:\\\\Projects\\\\ficha\\\\src\\\\components\\\\LugarResidenciaActual.jsx\";\nimport React from \"react\";\nimport { Form, Input, Select, Layout } from \"antd\";\nconst TextArea = Input.TextArea;\nconst Option = Select.Option;\nconst initttt = {\n  mode: \"no-cors\",\n  headers: {\n    \"Content-Type\": \"application/json\",\n    Accept: \"application/json\"\n  }\n};\nconst apiUrl = \"http://192.168.0.5/FichaDatos/FichaWeb/modules\"; // const apiUrl = 'https://net.upt.edu.pe/FichaDatos/FichaWeb/modules';\n\nclass LugarResidenciaActual extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.siguiente = e => {\n      e.preventDefault();\n      this.props.siguiente();\n    };\n\n    this.regresar = e => {\n      e.preventDefault();\n      this.props.regresar();\n    };\n\n    this.getCiudades = async () => {\n      // await fetch(\n      //   `${apiUrl}/Ciudad.php?p=read&session=${this.state.session}&CodUniv=${this.state.cod_univ}&idPais=9589`\n      // )\n      //   .then(response => response.json())\n      //   .then(data => this.setState({ ciudades: data }));\n      const ciudades = [];\n\n      for (let index = 0; index < this.state.ciudadesRes.length; index++) {\n        if (this.state.ciudadesRes[index].relacion == 9589) {\n          ciudades.push(this.state.ciudadesRes[index]);\n        }\n      }\n\n      if (ciudades.length > 0) {\n        await this.setState({\n          ciudades: ciudades\n        });\n      } else {\n        await this.setState({\n          ciudades: [],\n          ficha: _objectSpread({}, this.state.ficha, {\n            id_res_ciudad_per: \"-------\",\n            id_res_provincia_per: \"-------\"\n          })\n        });\n      }\n    };\n\n    this.getProvincias = async () => {\n      const provincias = [];\n\n      for (let index = 0; index < this.state.provinciasRes.length; index++) {\n        if (this.state.provinciasRes[index].relacion == this.state.ficha.id_res_ciudad_per) {\n          provincias.push(this.state.provinciasRes[index]);\n        }\n      }\n\n      if (provincias.length > 0) {\n        await this.setState({\n          provincias: provincias\n        });\n      } // await fetch(\n      //   `${apiUrl}/Provincia.php?p=read&session=${this.state.session}&CodUniv=${this.state.cod_univ}&idCiudad=2919`\n      // )\n      //   .then(response => response.json())\n      //   .then(data => this.setState({ provincias: data }));\n\n    };\n\n    this.getDistritos = async () => {\n      const distritos = [];\n\n      for (let index = 0; index < this.state.distritosRes.length; index++) {\n        if (this.state.distritosRes[index].CodDistProv == this.state.ficha.id_res_provincia_per) {\n          distritos.push(this.state.distritosRes[index]);\n        }\n      }\n\n      if (distritos.length > 0) {\n        await this.setState({\n          distritos: distritos\n        });\n      } // await fetch(\n      //   `${apiUrl}/Distrito.php?p=read&session=${this.state.session}&CodUniv=${this.state.cod_univ}&idPais=9589&idCiudad=2919&idProvincia=2301`\n      // )\n      //   .then(response => response.json())\n      //   .then(data => this.setState({ distritos: data }));\n\n    };\n\n    this.getDependencias = async () => {\n      await fetch(\"\".concat(apiUrl, \"/DependenciaVivienda.php?p=read&session=\").concat(this.state.session, \"&CodUniv=\").concat(this.state.cod_univ)).then(response => response.json()).then(data => this.setState({\n        dependencias: data\n      }));\n    };\n\n    this.handleSelectedCiudad = async e => {\n      await this.setState({\n        ficha: _objectSpread({}, this.state.ficha, {\n          id_res_ciudad_per: e\n        })\n      });\n      await this.getProvincias();\n    };\n\n    this.handleSelectedProvincia = async e => {\n      await this.setState({\n        ficha: _objectSpread({}, this.state.ficha, {\n          id_res_provincia_per: e\n        })\n      });\n      await this.getDistritos();\n    };\n\n    this.state = {\n      ficha: \"\",\n      ciudades: [],\n      provincias: [],\n      distritos: [],\n      dependencias: [],\n      ciudadesRes: [],\n      provinciasRes: [],\n      distritosRes: [],\n      session: this.props.session,\n      cod_univ: this.props.cod_univ\n    };\n  }\n\n  async componentDidMount() {\n    const _this$props = this.props,\n          ficha = _this$props.ficha,\n          ciudades = _this$props.ciudades,\n          provincias = _this$props.provincias,\n          distritos = _this$props.distritos,\n          dependencias = _this$props.dependencias;\n    await this.setState({\n      ciudadesRes: ciudades,\n      provinciasRes: provincias,\n      distritosRes: distritos,\n      dependencias: dependencias\n    });\n    await this.getCiudades();\n    await this.getProvincias();\n    await this.getDistritos(); // this.getDependencias();\n  }\n\n  render() {\n    // const { dependencias } = this.state;\n    // const { provincias } = this.state;\n    // const { distritos } = this.state;\n    const _this$props2 = this.props,\n          handleChangeInput = _this$props2.handleChangeInput,\n          handleChangeSelect = _this$props2.handleChangeSelect;\n    const _this$state = this.state,\n          ficha = _this$state.ficha,\n          ciudades = _this$state.ciudades,\n          provincias = _this$state.provincias,\n          distritos = _this$state.distritos,\n          dependencias = _this$state.dependencias;\n    const formItemLayout = {\n      labelCol: {\n        xs: {\n          span: 24\n        },\n        sm: {\n          span: 8\n        }\n      },\n      wrapperCol: {\n        xs: {\n          span: 24\n        },\n        sm: {\n          span: 16\n        }\n      }\n    };\n    const getFieldDecorator = this.props.form.getFieldDecorator;\n    return React.createElement(Layout, {\n      style: {\n        background: \"white\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, React.createElement(Form, Object.assign({}, formItemLayout, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }), React.createElement(Form.Item, {\n      label: \"Ciudad\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }, getFieldDecorator(\"ciudad\", {\n      initialValue: ficha.id_res_ciudad_per === \"\" || ficha.id_res_ciudad_per == null ? 2919 : ficha.id_res_ciudad_per,\n      rules: [{\n        required: true,\n        message: \"Por favor seleccione la ciudad.\"\n      }]\n    })(React.createElement(Select, {\n      placeholder: \"Seleccione la ciudad donde reside\",\n      onChange: handleChangeSelect(\"id_res_ciudad_per\"),\n      onSelect: this.handleSelectedCiudad,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }, ciudades.map(ciudad => React.createElement(Option, {\n      value: ciudad.CodCiudad,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }, ciudad.descripcion))))), React.createElement(Form.Item, {\n      label: \"Provincia\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }, getFieldDecorator(\"provincia\", {\n      initialValue: ficha.id_res_provincia_per === \"\" || ficha.id_res_provincia_per == null ? \"2301\" : ficha.id_res_provincia_per,\n      rules: [{\n        required: true,\n        message: \"Seleccione la provincia donde reside.\"\n      }]\n    })(React.createElement(Select, {\n      placeholder: \"Provincia\",\n      onChange: handleChangeSelect(\"id_res_provincia_per\"),\n      onSelect: this.handleSelectedProvincia,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226\n      },\n      __self: this\n    }, provincias.map(provincia => React.createElement(Option, {\n      value: provincia.CodProv,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232\n      },\n      __self: this\n    }, provincia.descripcion))))), React.createElement(Form.Item, {\n      label: \"Distrito\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239\n      },\n      __self: this\n    }, getFieldDecorator(\"distrito\", {\n      initialValue: ficha.id_res_distrito_per === \"\" || ficha.id_res_distrito_per == null ? \"230101\" : ficha.id_res_distrito_per,\n      rules: [{\n        required: true,\n        message: \"Por favor seleccione el distrito.\"\n      }]\n    })(React.createElement(Select, {\n      placeholder: \"Distrito\",\n      onChange: handleChangeSelect(\"id_res_distrito_per\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253\n      },\n      __self: this\n    }, distritos.map(distrito => React.createElement(Option, {\n      value: distrito.CodDist,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258\n      },\n      __self: this\n    }, distrito.descripcion))))), React.createElement(Form.Item, {\n      label: \"Direcci\\xF3n de Domicilio\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266\n      },\n      __self: this\n    }, getFieldDecorator(\"direccionDomicilio\", {\n      initialValue: ficha.res_direccion_per,\n      rules: [{\n        required: true,\n        message: \"Por registre su direcci√≥n.\"\n      }]\n    })(React.createElement(TextArea, {\n      rows: 4,\n      onChange: handleChangeInput(\"res_direccion_per\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 276\n      },\n      __self: this\n    }))), React.createElement(Form.Item, {\n      label: \"Referencia de Domicilio\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283\n      },\n      __self: this\n    }, getFieldDecorator(\"referenciaDomicilio\", {\n      initialValue: ficha.res_referencia_per,\n      rules: [{\n        required: true,\n        message: \"Por favor registre la referencia de su domicilio.\"\n      }]\n    })(React.createElement(TextArea, {\n      rows: 4,\n      onChange: handleChangeInput(\"res_referencia_per\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 293\n      },\n      __self: this\n    }))), React.createElement(Form.Item, {\n      label: \"Tel\\xE9fono de Referencia\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300\n      },\n      __self: this\n    }, getFieldDecorator(\"telefonoReferencia\", {\n      initialValue: ficha.res_telefono_per,\n      rules: [{\n        required: true,\n        message: \"Por favor ingrese un tel√©fono de referencia.\"\n      }]\n    })(React.createElement(Input, {\n      onChange: handleChangeInput(\"res_telefono_per\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 309\n      },\n      __self: this\n    }))), React.createElement(Form.Item, {\n      label: \"Vive en:\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 312\n      },\n      __self: this\n    }, getFieldDecorator(\"dependencia\", {\n      initialValue: ficha.id_dependencia_vivienda === \"\" || ficha.id_dependencia_vivienda == null ? 1 : ficha.id_dependencia_vivienda,\n      rules: [{\n        required: true,\n        message: \"Por favor seleccione una dependencia.\"\n      }]\n    })(React.createElement(Select, {\n      placeholder: \"Seleccione:\",\n      onChange: handleChangeSelect(\"id_dependencia_vivienda\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 326\n      },\n      __self: this\n    }, dependencias.map(dependencia => React.createElement(Option, {\n      value: dependencia.id_dependencia_vivienda,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 331\n      },\n      __self: this\n    }, dependencia.descripcion)))))));\n  }\n\n}\n\nexport default Form.create()(LugarResidenciaActual);","map":{"version":3,"sources":["D:\\Projects\\ficha\\src\\components\\LugarResidenciaActual.jsx"],"names":["React","Form","Input","Select","Layout","TextArea","Option","initttt","mode","headers","Accept","apiUrl","LugarResidenciaActual","Component","constructor","props","siguiente","e","preventDefault","regresar","getCiudades","ciudades","index","state","ciudadesRes","length","relacion","push","setState","ficha","id_res_ciudad_per","id_res_provincia_per","getProvincias","provincias","provinciasRes","getDistritos","distritos","distritosRes","CodDistProv","getDependencias","fetch","session","cod_univ","then","response","json","data","dependencias","handleSelectedCiudad","handleSelectedProvincia","componentDidMount","render","handleChangeInput","handleChangeSelect","formItemLayout","labelCol","xs","span","sm","wrapperCol","getFieldDecorator","form","background","initialValue","rules","required","message","map","ciudad","CodCiudad","descripcion","provincia","CodProv","id_res_distrito_per","distrito","CodDist","res_direccion_per","res_referencia_per","res_telefono_per","id_dependencia_vivienda","dependencia","create"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Form, Input, Select, Layout } from \"antd\";\n\nconst { TextArea } = Input;\nconst { Option } = Select;\n\nconst initttt = {\n  mode: \"no-cors\",\n  headers: {\n    \"Content-Type\": \"application/json\",\n    Accept: \"application/json\"\n  }\n};\n\nconst apiUrl = \"http://192.168.0.5/FichaDatos/FichaWeb/modules\";\n// const apiUrl = 'https://net.upt.edu.pe/FichaDatos/FichaWeb/modules';\nclass LugarResidenciaActual extends React.Component {\n  siguiente = e => {\n    e.preventDefault();\n    this.props.siguiente();\n  };\n\n  regresar = e => {\n    e.preventDefault();\n    this.props.regresar();\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      ficha: \"\",\n      ciudades: [],\n      provincias: [],\n      distritos: [],\n      dependencias: [],\n      ciudadesRes: [],\n      provinciasRes: [],\n      distritosRes: [],\n      session: this.props.session,\n      cod_univ: this.props.cod_univ\n    };\n  }\n\n  async componentDidMount() {\n    const { ficha, ciudades, provincias, distritos, dependencias } = this.props;\n\n    await this.setState({\n      ciudadesRes: ciudades,\n      provinciasRes: provincias,\n      distritosRes: distritos,\n      dependencias: dependencias\n    });\n    await this.getCiudades();\n    await this.getProvincias();\n    await this.getDistritos();\n    // this.getDependencias();\n  }\n\n  getCiudades = async () => {\n    // await fetch(\n    //   `${apiUrl}/Ciudad.php?p=read&session=${this.state.session}&CodUniv=${this.state.cod_univ}&idPais=9589`\n    // )\n    //   .then(response => response.json())\n    //   .then(data => this.setState({ ciudades: data }));\n    const ciudades = [];\n\n    for (let index = 0; index < this.state.ciudadesRes.length; index++) {\n      if (this.state.ciudadesRes[index].relacion == 9589) {\n        ciudades.push(this.state.ciudadesRes[index]);\n      }\n    }\n\n    if (ciudades.length > 0) {\n      await this.setState({\n        ciudades: ciudades\n      });\n    } else {\n      await this.setState({\n        ciudades: [],\n        ficha: {\n          ...this.state.ficha,\n          id_res_ciudad_per: \"-------\",\n          id_res_provincia_per: \"-------\"\n        }\n      });\n    }\n  };\n\n  getProvincias = async () => {\n    const provincias = [];\n    for (let index = 0; index < this.state.provinciasRes.length; index++) {\n      if (\n        this.state.provinciasRes[index].relacion ==\n        this.state.ficha.id_res_ciudad_per\n      ) {\n        provincias.push(this.state.provinciasRes[index]);\n      }\n    }\n    if (provincias.length > 0) {\n      await this.setState({\n        provincias: provincias\n      });\n    }\n\n    // await fetch(\n    //   `${apiUrl}/Provincia.php?p=read&session=${this.state.session}&CodUniv=${this.state.cod_univ}&idCiudad=2919`\n    // )\n    //   .then(response => response.json())\n    //   .then(data => this.setState({ provincias: data }));\n  };\n\n  getDistritos = async () => {\n    const distritos = [];\n    for (let index = 0; index < this.state.distritosRes.length; index++) {\n      if (\n        this.state.distritosRes[index].CodDistProv ==\n        this.state.ficha.id_res_provincia_per\n      ) {\n        distritos.push(this.state.distritosRes[index]);\n      }\n    }\n    if (distritos.length > 0) {\n      await this.setState({\n        distritos: distritos\n      });\n    }\n    // await fetch(\n    //   `${apiUrl}/Distrito.php?p=read&session=${this.state.session}&CodUniv=${this.state.cod_univ}&idPais=9589&idCiudad=2919&idProvincia=2301`\n    // )\n    //   .then(response => response.json())\n    //   .then(data => this.setState({ distritos: data }));\n  };\n\n  getDependencias = async () => {\n    await fetch(\n      `${apiUrl}/DependenciaVivienda.php?p=read&session=${\n        this.state.session\n      }&CodUniv=${this.state.cod_univ}`\n    )\n      .then(response => response.json())\n      .then(data => this.setState({ dependencias: data }));\n  };\n\n  handleSelectedCiudad = async e => {\n    await this.setState({\n      ficha: {\n        ...this.state.ficha,\n        id_res_ciudad_per: e\n      }\n    });\n    await this.getProvincias();\n  };\n\n  handleSelectedProvincia = async e => {\n    await this.setState({\n      ficha: {\n        ...this.state.ficha,\n        id_res_provincia_per: e\n      }\n    });\n    await this.getDistritos();\n  };\n\n  render() {\n    // const { dependencias } = this.state;\n    // const { provincias } = this.state;\n    // const { distritos } = this.state;\n    const { handleChangeInput, handleChangeSelect } = this.props;\n    const { ficha, ciudades, provincias, distritos, dependencias } = this.state;\n\n    const formItemLayout = {\n      labelCol: {\n        xs: { span: 24 },\n        sm: { span: 8 }\n      },\n      wrapperCol: {\n        xs: { span: 24 },\n        sm: { span: 16 }\n      }\n    };\n\n    const { getFieldDecorator } = this.props.form;\n    return (\n      <Layout style={{ background: \"white\" }}>\n        <Form {...formItemLayout}>\n          <Form.Item label=\"Ciudad\">\n            {getFieldDecorator(\"ciudad\", {\n              initialValue:\n                ficha.id_res_ciudad_per === \"\" ||\n                ficha.id_res_ciudad_per == null\n                  ? 2919\n                  : ficha.id_res_ciudad_per,\n              rules: [\n                {\n                  required: true,\n                  message: \"Por favor seleccione la ciudad.\"\n                }\n              ]\n            })(\n              <Select\n                placeholder={\"Seleccione la ciudad donde reside\"}\n                onChange={handleChangeSelect(\"id_res_ciudad_per\")}\n                onSelect={this.handleSelectedCiudad}\n              >\n                {ciudades.map(ciudad => (\n                  <Option value={ciudad.CodCiudad}>{ciudad.descripcion}</Option>\n                ))}\n              </Select>\n            )}\n          </Form.Item>\n          <Form.Item label=\"Provincia\">\n            {getFieldDecorator(\"provincia\", {\n              initialValue:\n                ficha.id_res_provincia_per === \"\" ||\n                ficha.id_res_provincia_per == null\n                  ? \"2301\"\n                  : ficha.id_res_provincia_per,\n              rules: [\n                {\n                  required: true,\n                  message: \"Seleccione la provincia donde reside.\"\n                }\n              ]\n            })(\n              <Select\n                placeholder={\"Provincia\"}\n                onChange={handleChangeSelect(\"id_res_provincia_per\")}\n                onSelect={this.handleSelectedProvincia}\n              >\n                {provincias.map(provincia => (\n                  <Option value={provincia.CodProv}>\n                    {provincia.descripcion}\n                  </Option>\n                ))}\n              </Select>\n            )}\n          </Form.Item>\n          <Form.Item label=\"Distrito\">\n            {getFieldDecorator(\"distrito\", {\n              initialValue:\n                ficha.id_res_distrito_per === \"\" ||\n                ficha.id_res_distrito_per == null\n                  ? \"230101\"\n                  : ficha.id_res_distrito_per,\n              rules: [\n                {\n                  required: true,\n                  message: \"Por favor seleccione el distrito.\"\n                }\n              ]\n            })(\n              <Select\n                placeholder={\"Distrito\"}\n                onChange={handleChangeSelect(\"id_res_distrito_per\")}\n              >\n                {distritos.map(distrito => (\n                  <Option value={distrito.CodDist}>\n                    {distrito.descripcion}\n                  </Option>\n                ))}\n              </Select>\n            )}\n          </Form.Item>\n\n          <Form.Item label=\"Direcci√≥n de Domicilio\">\n            {getFieldDecorator(\"direccionDomicilio\", {\n              initialValue: ficha.res_direccion_per,\n              rules: [\n                {\n                  required: true,\n                  message: \"Por registre su direcci√≥n.\"\n                }\n              ]\n            })(\n              <TextArea\n                rows={4}\n                onChange={handleChangeInput(\"res_direccion_per\")}\n              />\n            )}\n          </Form.Item>\n\n          <Form.Item label=\"Referencia de Domicilio\">\n            {getFieldDecorator(\"referenciaDomicilio\", {\n              initialValue: ficha.res_referencia_per,\n              rules: [\n                {\n                  required: true,\n                  message: \"Por favor registre la referencia de su domicilio.\"\n                }\n              ]\n            })(\n              <TextArea\n                rows={4}\n                onChange={handleChangeInput(\"res_referencia_per\")}\n              />\n            )}\n          </Form.Item>\n\n          <Form.Item label=\"Tel√©fono de Referencia\">\n            {getFieldDecorator(\"telefonoReferencia\", {\n              initialValue: ficha.res_telefono_per,\n              rules: [\n                {\n                  required: true,\n                  message: \"Por favor ingrese un tel√©fono de referencia.\"\n                }\n              ]\n            })(<Input onChange={handleChangeInput(\"res_telefono_per\")} />)}\n          </Form.Item>\n\n          <Form.Item label=\"Vive en:\">\n            {getFieldDecorator(\"dependencia\", {\n              initialValue:\n                ficha.id_dependencia_vivienda === \"\" ||\n                ficha.id_dependencia_vivienda == null\n                  ? 1\n                  : ficha.id_dependencia_vivienda,\n              rules: [\n                {\n                  required: true,\n                  message: \"Por favor seleccione una dependencia.\"\n                }\n              ]\n            })(\n              <Select\n                placeholder={\"Seleccione:\"}\n                onChange={handleChangeSelect(\"id_dependencia_vivienda\")}\n              >\n                {dependencias.map(dependencia => (\n                  <Option value={dependencia.id_dependencia_vivienda}>\n                    {dependencia.descripcion}\n                  </Option>\n                ))}\n              </Select>\n            )}\n          </Form.Item>\n        </Form>\n      </Layout>\n    );\n  }\n}\n\nexport default Form.create()(LugarResidenciaActual);\n"]},"metadata":{},"sourceType":"module"}